/** @license
 * backbone-socketio 0.2.0
 * (c) 2013-2014 Josh Mock
 * This may be freely distributed under the MIT license. */
!function(a,b,c){"use strict";var d=function(a){this.mixins={collection:{initialize:function(){if(!(this instanceof b.Collection))throw new Error("This object is not a Backbone.Collection");var d=c.uniqueId("socketEventCollection"),e={id:d},f=this;this.socketId=d,this.on("add",function(b,d,f){f.triggeredBySocket||a.emit("Backbone.Collection.add",c.extend(c.clone(e),{model:b.toJSON(),modelSocketId:b.socketId,index:d.models.indexOf(b)}))}),this.on("remove",function(b,d,f){f.triggeredBySocket||a.emit("Backbone.Collection.remove",c.extend(c.clone(e),{modelSocketId:b.socketId}))}),this.on("sort",function(b,d){d.triggeredBySocket||a.emit("Backbone.Collection.sort",c.clone(e))}),a.on("Backbone.Collection.add",function(a){a.id===f.socketId&&(f.add(a.model,{at:a.index,triggeredBySocket:!0}),f.at(a.index).socketId=a.modelSocketId)}),a.on("Backbone.Collection.remove",function(a){if(a.id===f.socketId){var b;f.each(function(c){c.socketId===a.modelSocketId&&(b=c)}),f.remove(b,{triggeredBySocket:!0})}}),a.on("Backbone.Collection.sort",function(a){a.id===f.socketId&&f.sort({triggeredBySocket:!0})})}},model:{initialize:function(){if(!(this instanceof b.Model))throw new Error("This object is not a Backbone.Model");var d=c.uniqueId("socketEventModel"),e=this;this.socketId=d,this.on("change",function(b,c){c.triggeredBySocket||a.emit("Backbone.Model.change",{id:e.socketId,updates:e.toJSON()})}),a.on("Backbone.Model.change",function(a){a.id===e.socketId&&e.set(a.updates,{triggeredBySocket:!0})})}}}};"function"==typeof define&&define.amd?define([],function(){return d}):"undefined"!=typeof module&&module.exports?module.exports=d:a.BackboneSocketio=d}(this,Backbone,_);
//# sourceMappingURL=backbone-socketio.min.map